
# Vercel デプロイ手順

このドキュメントでは、「BEAUTY ROAD スケジュール調整アプリ」をVercelにデプロイする手順を説明します。

## 前提条件

*   Vercelアカウントが作成済みであること ([vercel.com](https://vercel.com/))。
*   プロジェクトがGitHub、GitLab、またはBitbucketのリポジトリにプッシュされていること。
*   (Supabaseを使用する場合) Supabaseプロジェクトがセットアップ済みであり、API URLとAnonキーが取得できていること。（詳細は `SUPABASE_SETUP.md` を参照）

## 1. Vercelプロジェクトの作成とGit連携

1.  [Vercelダッシュボード](https://vercel.com/dashboard)にログインします。
2.  「Add New...」ドロップダウンから「Project」を選択します。
3.  **Import Git Repository**:
    *   デプロイしたいプロジェクトが含まれるGitプロバイダー（例: GitHub）を選択し、連携します。
    *   該当のリポジトリを選択（Import）します。Vercelにリポジトリへのアクセス権限を付与する必要がある場合があります。

## 2. プロジェクトの設定 (Configure Project)

リポジトリをインポートすると、プロジェクト設定画面が表示されます。

*   **Project Name**: Vercel上でのプロジェクト名です。自動でリポジトリ名が入力されますが、変更も可能です。
*   **Framework Preset**:
    *   現在のプロジェクトは `index.html` でCDNからライブラリを読み込むシンプルな静的サイト構成です。
    *   Vercelは自動でフレームワークを検出しようとしますが、この構成の場合は「Other」を選択するのが適切かもしれません。
    *   もしViteやCreate React Appのような標準的なReactのビルドツールを導入した場合、Vercelはそれを自動検出し、適切なビルド設定を提案します（例: Framework Preset: `Vite` / `Create React App`）。
*   **Build and Output Settings** (Framework Presetが「Other」の場合、またはカスタマイズする場合):
    *   **Build Command**:
        *   現在の構成では特別なビルドコマンドは不要です。空にするか、`echo "No build step required"` のように設定できます。
        *   Viteなどを導入した場合: `vite build` や `npm run build` などを指定します。
    *   **Output Directory**:
        *   現在の構成では、プロジェクトのルートディレクトリに `index.html` があるため、この設定は通常不要か、Vercelのデフォルト（ビルドコマンド実行後の成果物が置かれる場所、通常 `dist` や `build`）に従います。静的ファイルのみの場合、Vercelはルートを配信します。
        *   Viteなどを導入した場合: ビルド成果物が出力されるディレクトリ（例: `dist`）を指定します。
    *   **Install Command**:
        *   依存関係をインストールするコマンドを指定します。例: `pnpm install`、`npm install`、または `yarn install`。
        *   現在の構成では `package.json` が最小限で、ランタイム依存関係はCDN経由のため、このステップがスキップされるか、影響がない可能性があります。ビルドツール導入後は必須です。
*   **Root Directory**: リポジトリのルートに `index.html` や `package.json` があれば、通常はデフォルトのままで問題ありません。

## 3. 環境変数の設定

アプリケーションが必要とする外部サービスのAPIキーなどを設定します。

1.  プロジェクト設定画面の「Settings」タブに移動し、左メニューから「Environment Variables」を選択します。
2.  以下の環境変数を追加します。キーの名前は、アプリケーションコードで参照する名前に合わせます（例: Viteなら `VITE_` プレフィックス）。
    *   **(Supabaseを使用する場合)**
        *   `VITE_SUPABASE_URL`: SupabaseプロジェクトのURL。
        *   `VITE_SUPABASE_ANON_KEY`: SupabaseプロジェクトのAnon (public) キー。
    *   **(将来的にGemini APIを使用する場合)**
        *   `API_KEY`: Google GenAI APIキー。
        *   注意: Gemini APIキーをクライアントサイドで直接使用する場合は、キーの漏洩リスクと適切な対策（APIキー制限など）を十分に検討してください。通常はバックエンド経由での利用が推奨されます。

3.  各環境変数について、キーと値を入力し、対象の環境（Production, Preview, Development）を選択して「Add」をクリックします。

## 4. デプロイの実行

すべての設定が完了したら、「Deploy」ボタンをクリックします。
Vercelがプロジェクトのビルドプロセス（もしあれば）を実行し、デプロイを開始します。これには数分かかることがあります。
デプロイが完了すると、ユニークなURL（例: `your-project-name.vercel.app`）が発行され、アプリケーションにアクセスできるようになります。

## 5. デプロイ後の確認と自動デプロイ

*   発行されたURLにアクセスし、アプリケーションが期待通りに動作するか確認します。
*   ブラウザの開発者コンソールでエラーが出ていないか確認します。
*   デフォルトでは、Gitリポジトリのメインブランチ（例: `main` や `master`）にプッシュするたびに、Vercelは自動的に新しいバージョンをビルドしデプロイします。プルリクエストに対してもプレビューデプロイが作成されます。

## 6. カスタムドメイン（オプション）

必要に応じて、Vercelプロジェクトにカスタムドメインを設定することも可能です。
プロジェクト設定の「Domains」セクションから指示に従って設定してください。

## トラブルシューティング

*   **ビルドエラー**: Vercelのダッシュボードでデプロイログを確認し、エラーメッセージに基づいて問題を解決します。依存関係の不足、ビルドコマンドの誤り、環境変数の未設定などが一般的な原因です。
*   **ランタイムエラー**:
    *   クライアントサイドのエラー: ブラウザの開発者ツール（コンソール）を確認します。
    *   API接続の問題: 環境変数が正しく設定されているか、APIエンドポイントが正しいか確認します。
*   **現在のCDNベースの構成について**:
    このプロジェクトは `index.html` 内で `script type="importmap"` とCDNを利用してReact等を直接読み込んでいます。この構成はVercelでも静的サイトとして問題なく動作するはずです。
    しかし、パフォーマンス最適化（バンドル、ツリーシェイキング）、開発体験の向上（HMR）、より高度な設定のためには、ViteやNext.js (Static Export)のようなReactフレームワーク/ビルドツールを導入することを推奨します。その場合、VercelのFramework Presetを適切に設定することで、ビルドプロセスが自動化されます。

これでVercelへの基本的なデプロイ手順は完了です。
